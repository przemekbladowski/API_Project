(()=>{const t=L.map("map",{zoomControl:!1}).setView([52.237,21.017],6);let e;L.control.zoom({position:"bottomright"}).addTo(t),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t);const o=L.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});window.addEventListener("load",async function(){try{const n=await fetch("https://ipwho.is/"),i=await n.json();if(!i.success)throw new Error("Nie udało się pobrać lokalizacji.");document.getElementById("ip-address").textContent=i.ip,document.getElementById("location-text").textContent=`${i.city}, ${i.country}`,document.getElementById("lat").textContent=i.latitude.toFixed(5)+"°",document.getElementById("lng").textContent=i.longitude.toFixed(5)+"°";const a=i.latitude,d=i.longitude;t.flyTo([a,d],14,{animate:!0,duration:1.5}),e&&t.removeLayer(e),e=L.marker([a,d],{icon:o}).addTo(t).bindPopup(`<div style="text-align: center;"><b>Twoja przybliżona lokalizacja</b><br>${i.city}</div>`).openPopup()}catch(t){console.error("Błąd:",t),document.getElementById("location-text").textContent="Niedostępne (np. AdBlock)",document.getElementById("ip-address").textContent="Błąd"}})})();